<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <meta http-equiv="Pragma" content="no-cache"/>
        <meta http-equiv="Cache-Control" content="no-cache"/>
        <meta http-equiv="Expires" content="0"/>
        <title>#{myParam.application_id} #{myMsg.hinshitsuMenu}</title>
        <link href="#{request.contextPath}/resources/css/growl.css" rel="stylesheet" type="text/css"/>
        <link href="#{request.contextPath}/resources/css/loading.css" rel="stylesheet" type="text/css"/>
        <link href="#{request.contextPath}/resources/css/gxhco901a.css" rel="stylesheet" type="text/css"/>
        <h:outputScript library="primefaces" name="jquery/jquery.js" />
        <script src="#{request.contextPath}/resources/js/locUpload.js"></script>
        <script src="#{request.contextPath}/resources/js/growl.js"></script>
        <script type="text/javascript">
            //<![CDATA[
            $(document).ready(function() {
                //upload to
                g_locationUrl = '#{myParam.locationUrl}';
                //MAC Address
                g_macAddr = '#{sessionInfo.macAddr}';
                //location
                g_location = '#{myMsg.NotAvailable}';
                g_prgname = 'gxhdo102a.xhtml(GXHDO102A)';
                var interval_id = setInterval(getLocation, #{myParam.sendLocInterval});
            });
            
            function cmdButtonOncomplete(args) {
                if('warning'===args.firstParam){
                    PF('cd').show();
                } else if('initMessage'===args.firstParam){
                    PF('W_dlg_initMessage').show();
                } else if('gxhdo102c017'===args.firstParam){
                    PF('W_dlg_gxhdo102c017').show();
                } else if('deleteConf'===args.firstParam){
                    PF('deleteCd').show();
                }
            }
            var pointY;
            function subFormOpen() {
                pointY = $(window).scrollTop();
                document.getElementById("mainForm").style.setProperty("display", "none");
                document.getElementById("mainForm").style.setProperty("position", "fixed");
                document.getElementById("mainForm").style.setProperty("Top", -(pointY) + 100 + "px");
                document.getElementById("mainForm").style.removeProperty("display");
            }
            function subFormClose() {  
                document.getElementById("mainForm").style.setProperty("display", "none");
                document.getElementById("mainForm").style.removeProperty("position");
                document.getElementById("mainForm").style.removeProperty("Top");
                document.getElementById("mainForm").style.removeProperty("display");
                $(window).scrollTop(pointY);
            }
            //]]>
        </script>
        <style type='text/css'>
        .button
        {
         font-size:18px;
         text-align:center;
         padding:0px;
         vertical-align:middle ;
         line-height:22px;
         margin:0px; 
         height:26px;
         width:60px;
        }
        .txt
        {
        border:1px #6699CC solid;
        height:30px;
        width:160px;
        margin:0px;
        vertical-align:middle; 
        font-size:12px;
        padding:0px 2px;
        line-height :16px;
        }
        </style>
    </h:head>
    <h:body>
        <f:metadata>
            <f:viewParam id="macAddr" name="macAddr" value="#{sessionManager.macAddr}"/>
            <f:viewAction action="#{sessionManager.validateUser()}"/>
            <f:viewAction action="#{gXHDO102A.init()}"/>
        </f:metadata>
        <div style="margin-left:auto;margin-right:auto;width:#{adjustModels.menuWidth}px;">
        <br/>
        <h2>#{myMsg.hinshitsuDB}</h2>
        <h:form id="form" onkeypress="if (event.keyCode === 13) { return false; }">
            <div id="mainForm">
                <p:growl id="growlMessage" showDetail="false" sticky="true" escape="false"/>
            <p:confirmDialog id="confDialog" class="ui-confdialog" severity="alert" widgetVar="cd">
                <f:facet name="message">
                    <h:outputText value="#{gXHDO102A.getWarnMessage()}" escape="false"/>
                </f:facet>
                <p:commandButton id="warnOk" value="OK" styleClass="ui-conf-commandbtn-def1"
                                 action="#{gXHDO102A.getLinkPage()}"
                                 process="@this"
                                 update="@this"
                                 oncomplete="PF('cd').hide();"/>
            </p:confirmDialog>
            <p:confirmDialog id="deleteConfDialog" class="ui-confdialog" severity="alert" widgetVar="deleteCd">
                <f:facet name="message">
                    <h:outputText value="#{gXHDO102A.getWarnMessage()}" escape="false"/>
                </f:facet>
                <p:commandButton id="delOk" value="OK" styleClass="ui-conf-commandbtn-def1"
                                 actionListener="#{gXHDO102A.deleteMenu()}"
                                 process="@this"
                                 update="menuTable growlMessage"
                                 oncomplete="PF('deleteCd').hide();"/>
                <p:commandButton id="delCancel" value="Cancel" class="ui-conf-commandbtn-cancel" onclick="PF('deleteCd').hide();" type="button" />
            </p:confirmDialog>
            <div id="loadinggif">
                <img src="#{request.contextPath}/resources/gif/gif-load.gif"/>
            </div>
            <tr>
                <div class='inner' style="position:relative">
                <div class="divPad" style=" height:92px;">
                    <table>
                        <tr>
                            <td>
                                <h:outputText id="lblTantosha" value="担当者ｺｰﾄﾞ" style="margin-top: 40px;font-size:18px;"/>
                            </td>
                            <td>
                                <h:inputText id="tantoshaCd" value="#{gXHDO102A.tantoshaCd}" class="txt" maxlength="6" style="border-style: groove; font-size: 22px; width: 140px; margin-left: 40px;">
                                    <p:ajax event="blur" process="@this" update="@this" listener="#{gXHDO102A.convertToUpperCase()}"  async="false"/>
                                </h:inputText>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <h:outputText id="lblLotNo" value="ロットNo" style="margin-top: 40px;font-size:18px;"/>
                            </td>
                            <td>
                                <h:inputText id="lotNo" value="#{gXHDO102A.lotNo}" class="txt" maxlength="15" style="border-style: groove; font-size: 22px; width: 300px; margin-left: 40px;"/>
                                <p:commandButton id="searchBtn" class="button"  styleClass="ui-conf-commandbtn-def1" style="float:right;margin-left: 40px;width: 94px; height: 32px; font-size: 13px;"
                                      value="ロット検索"
                                      actionListener="#{gXHDO102A.searchHinshitsuData()}"
                                      process="@this lotNo tantoshaCd"
                                      update="@form"
                                      onstart="PF('cd').hide();$('#loadinggif').show();$('#dataTableDiv').hide();"
                                      oncomplete="$('#loadinggif').hide();$('#dataTableDiv').show();cmdButtonOncomplete(args);"/>
                            </td>
                        </tr>
                    </table>
                </div>
                </div>
            </tr>
            <tr>
            <div id="dataTableDiv">
                <p:dataTable id="menuTable" var="item" rendered="#{gXHDO102A.menuTableRender}" value="#{gXHDO102A.listData}"
                             style="margin-top: 20px;margin-left:auto;margin-right:auto;width:#{adjustModels.menuWidth}px;font-size: 17px;"
                             scrollable="true"
                             emptyMessage="">
                    <div style="text-align:center">
                    <p:column id="mItem" width="50%" headerText="#{myMsg.hinshitsuDB_Name}" style="font-size: 17px;">
                        <p:commandLink value="#{item.menuName}" style="color:Indigo;font-size: 17px;"
                                       action="#{gXHDO102A.openXhdForm(item)}" oncomplete="cmdButtonOncomplete(args);" 
                                       update="@form">
                        </p:commandLink>
                    </p:column>
                    </div>
                    <p:column id="mComment" width="50%" headerText="#{myMsg.status}"  style="font-size: 17px; ">
                        <p:outputLabel value="#{item.menuComment}" style="float:left;font-size: 17px;"/>
                        <div style="text-align: right;">
                            <p:commandButton class="button" rendered="#{item.deleteBtnRender}"  styleClass="ui-conf-commandbtn-def1" style="width: 74px; height: 32px; font-size: 17px; "
                                         value="削除"
                                         actionListener="#{gXHDO102A.checkDeleteMenu(item)}"
                                         process="@this"
                                         update="form:menuTable form:deleteConfDialog form:growlMessage"
                                         onstart="PF('cd').hide();$('#loadinggif').show();"
                                         oncomplete="$('#loadinggif').hide();cmdButtonOncomplete(args);"/>
                            <p:commandLink value="画面追加" rendered="true" style="color:Indigo;font-size: 17px;"
                                       actionListener="#{gXHDO102A.checkAddMenu(item)}" oncomplete="cmdButtonOncomplete(args);" 
                                       update="@form">
                        </p:commandLink>
                        </div>
                    </p:column>
                </p:dataTable>
            </div>
            </tr>
            <br/>
            <tr>
                <td style="position:relative;left:16px;">
                   <p:commandButton id="returnBtn" styleClass="ui-conf-commandbtn-def1" class="button"  style="width: 95px; height: 32px; font-size: 13px;"
                                    value="#{myMsg.return}" action="/secure/pxhdo012/gxhdo012a.xhtml?faces-redirect=true"
                                    process="@this" update="@this"/>          
                </td>
            </tr>
            </div>
            <div>
                <ui:include src="/secure/common/initMessage.xhtml"/>
                <ui:include src="/secure/pxhdo102/gxhdo102c017.xhtml"/>
            </div>
        </h:form>
        </div>
    </h:body>
</html>