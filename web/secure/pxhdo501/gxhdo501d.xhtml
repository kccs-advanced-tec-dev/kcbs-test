<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="ja"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:t="http://myfaces.apache.org/tomahawk">
    <h:head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <meta http-equiv="Pragma" content="no-cache"/>
        <meta http-equiv="Cache-Control" content="no-cache"/>
        <meta http-equiv="Expires" content="0"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link href="#{request.contextPath}/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="#{request.contextPath}/resources/css/growl.css" rel="stylesheet" type="text/css"/>
        <link href="#{request.contextPath}/resources/css/loading.css" rel="stylesheet" type="text/css"/>
        <link href="#{request.contextPath}/resources/css/gxhdo201common.css" rel="stylesheet" type="text/css"/>
        <link href="#{request.contextPath}/resources/css/gxhco901a.css" rel="stylesheet" type="text/css"/>
        <script src="#{request.contextPath}/resources/bootstrap/js/bootstrap.min.js" />
        <h:outputScript library="primefaces" name="jquery/jquery.js" />
        <script src="#{request.contextPath}/resources/js/locUpload.js"></script>
        <script src="#{request.contextPath}/resources/js/growl.js"></script>        
        <script type="text/javascript">
            //<![CDATA[
            function logOut() {
                window.#{adjustModels.external}.logOut();
            }
            $(document).ready(function () {
                //upload to
                g_locationUrl = '#{myParam.locationUrl}';
                //MAC Address
                g_macAddr = '#{sessionInfo.macAddr}';
                //location
                g_location = '#{myMsg.NotAvailable}';
                g_prgname = 'gxhdo501d.xhtml(#{gXHDO501D.formId})';

                var interval_id = setInterval(getLocation, #{myParam.sendLocInterval});
            });
            var pointY;
            function subFormOpen() {
                pointY = $(window).scrollTop();
                document.getElementById("mainForm").style.setProperty("display", "none");
                document.getElementById("mainForm").style.setProperty("position", "fixed");
                document.getElementById("mainForm").style.setProperty("Top", -(pointY) + 54 + "px");
                document.getElementById("mainForm").style.removeProperty("display");
            }
            function subFormClose() {
                document.getElementById("mainForm").style.setProperty("display", "none");
                document.getElementById("mainForm").style.removeProperty("position");
                document.getElementById("mainForm").style.removeProperty("Top");
                document.getElementById("mainForm").style.removeProperty("display");
                $(window).scrollTop(pointY);
            }
            function cmdButtonOncomplete(args) {
                if ('warning' === args.firstParam) {
                    PF('cd').show();
                } else if ('auth' === args.firstParam) {
                    PF('W_dlg_userAuth').show();
                } else if ('kikakuError' === args.firstParam) {
                    PF('W_dlg_kikakuError').show();
                } else if ('infoMessage' === args.firstParam) {
                    PF('W_dlg_infoMessage').show();
                } else if ('complete' === args.firstParam) {
                    PF('W_dlg_compMessage').show();
                }
            }
            //]]>
        </script>
    </h:head>
   <h:body style="padding-top:30px;">
        <f:metadata>
            <f:viewAction action="#{gXHDO501DA.init()}"/>
        </f:metadata>
        <nav class="navbar  navbar-expand fixed-top navbar-dark" style="background-color:#0E6A89;height: 50px;z-index: 999;">
            <span class="navbar-brand mb-0" style="font-size:18px;font-weight:bold;">#{myMsg.GXHDO501D_GamenTitle}</span>
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#Navber" aria-controls="Navber" aria-expanded="false" aria-label="ナビゲーションの切替">
                <span class="navbar-toggler-icon"></span>
            </button>
            <span class="navbar-text ml-auto">
                <div class="collapse navbar-collapse" id="Navber">
                  <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <h:link class="nav-link" outcome="/secure/pxhdo501/gxhdo501c.xhtml?faces-redirect=true" value="戻る"/>
                    </li>
                  </ul>
                </div>
            </span>
        </nav>
        <br/>
        <h:form id="form" style="#{gXHDO501DA.displayStyle}" onkeypress="if (event.keyCode === 13) {
                    return false;
                }">
            <div id="mainForm" style="width: 100%;">
            <p:growl id="growlMessage" showDetail="false" sticky="true"  escape="false"/>
            <p:confirmDialog id="confDialog" class="ui-confdialog" severity="alert" widgetVar="cd">
                <f:facet name="message">
                    <h:outputText value="#{gXHDO501DA.getWarnMessage()}" escape="false"/>
                </f:facet>
                <p:commandButton id="warnOk" value="OK" styleClass="ui-conf-commandbtn-def1"
                                 actionListener="#{gXHDO501DA.processWarnOkClick()}"
                                 process="@form"
                                 update="@form"
                                 onclick="PF('cd').hide();"
                                 oncomplete="if('warning'!=args.firstParam){PF('cd').hide(); cmdButtonOncomplete(args);} else {PF('cd').show();}"/>
                <p:commandButton id="warnCancel" value="Cancel" class="ui-conf-commandbtn-cancel" onclick="PF('cd').hide();" type="button" />
            </p:confirmDialog>
            <div id="loadinggif">
                <img src="#{request.contextPath}/resources/gif/gif-load.gif"/>
            </div>
             <p:panel id="searchpanel" style="border:none;font-size:0.8em;">
                <table>
                    <tr>
                        <td>
                            <h:outputText id="lblLotNo" value="ﾛｯﾄNo" style="width:100px;"/>
                        </td>
                        <td colspan="3">
                            <p:inputText id="pLotNo" value="#{gXHDO501DA.lotNo}" maxlength="14" style="margin-left:20px; height:26px;" readonly="true"/>
                        </td>
                    </tr>  
                    <tr>
                        <td>
                            <h:outputText id="lblSyurui" value="種類" style="width:100px;"/>
                        </td>
                        <td colspan="3">
                            <p:inputText id="pSyurui" value="#{gXHDO501DA.syurui}" maxlength="20" style="margin-left:20px; height:26px;" readonly="true"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:outputText id="lblPattern" value="ﾊﾟﾀｰﾝ" style="width:100px;"/>
                        </td>
                        <td colspan="3">
                            <p:inputText id="pPattern" value="#{gXHDO501DA.pattern}" maxlength="6" style="margin-left:20px; height:26px;" readonly="true"/>
                        </td>
                    </tr>
                </table>
            </p:panel>
            <p:panel id="buttonpanel" style="border:none;margin-top:-10px;">
                <p:commandButton id="btnUpdate" style="width:100px;height:25px;font-size:0.7em;margin-left:0px;text-align:center;"
                                value="修正" 
                                actionListener="#{gXHDO501DA.confirmUpdate()}"
                                process="@this searchpanel idDataTable"
                                update="growlMessage confDialog idDataTable"
                                async="true"
                                oncomplete="cmdButtonOncomplete(args);"/>
                <p:commandButton id="btnAddr" style="width:100px;height:25px;font-size:0.7em;margin-left:10px;text-align:center;" 
                            value="追加" 
                            action="#{gXHDO501DA.addDataRow()}"
                            process="@this idDataTable"
                            update="@form growlMessage idDataTable"
                            />
            </p:panel>
            <div style="margin-top:-15px;">
                <p:dataTable id="idDataTable" var="item" style="font-size:0.8em;margin-top:20px;" styleClass="table table-condensed table-striped table-hover header-fixed text-nowrap"
                             value="#{gXHDO501DA.listData}" emptyMessage="" >
                    <p:column id="kouteimei" headerText="工程名" style=" text-align: center;" >
                        <p:inputText id="pKouteimei" value="#{item.kouteimei}" rendered="#{item.addFlg=='1'}" maxlength="20" style="height:26px;background-color:#{item.kouteimeibgcolor}" />
                        <p:outputLabel rendered="#{item.addFlg!='1'}" value="#{item.kouteimei}"/>
                    </p:column>
                    <p:column id="koumokumei" headerText="項目名" style=" text-align: center;">
                        <p:inputText id="pKoumokumei" value="#{item.koumokumei}" rendered="#{item.addFlg=='1'}" maxlength="20" style="height:26px;background-color:#{item.koumokumeibgcolor}" />
                        <p:outputLabel rendered="#{item.addFlg!='1'}" value="#{item.koumokumei}"/>
                    </p:column>
                    <p:column id="kanrikoumokumei" headerText="管理項目" style=" text-align: center;">
                        <p:inputText id="pKanrikoumokumei" value="#{item.kanrikoumokumei}" rendered="#{item.addFlg=='1'}" maxlength="20" style="height:26px;background-color:#{item.kanrikoumokumeibgcolor}" />
                        <p:outputLabel rendered="#{item.addFlg!='1'}" value="#{item.kanrikoumokumei}"/>
                    </p:column>
                    <p:column id="kikakuti" headerText="規格値" style=" text-align: center; ">
                        <p:inputText id="pKikakuti" value="#{item.kikakuti}" maxlength="20" style="height:26px;background-color:#{item.kikakutibgcolor}" />
                    </p:column>
                    <p:column id="tyekkupattern" headerText="ﾁｪｯｸﾊﾟﾀｰﾝ" style=" text-align: center;background-color:#{item.tyekkupatternbgcolor}">
                        <p:selectOneMenu id="pCmbTyekkupattern"  value="#{item.tyekkupattern}" styleClass="selectMenu" editable="false"  style="height:26px;width:100px">
                                <f:selectItem itemValue="" itemLabel=""/>
                                <f:selectItems value="#{gXHDO501DA.cmbTyekkupatternData}" />
                        </p:selectOneMenu>
                    </p:column>
                    <p:column id="hyoJunKikakuti" headerText="標準規格値" style=" text-align: center;">
                        <p:outputLabel value="#{item.hyojunkikakuti}"/>
                    </p:column> 
                    <p:column id="hyoJunTyekkupattern" headerText="標準ﾁｪｯｸﾊﾟﾀｰﾝ" style=" text-align: center;">
                        <p:outputLabel value="#{item.hyojuntyekkupattern}"/>
                    </p:column>    
                </p:dataTable>
            </div>            
            </div>
            <div>
                <ui:include src="/secure/common/initMessage.xhtml"/>
                <t:aliasBean alias="#{gXHDO901ACommon}" value="#{gXHDO501DA}">
                    <ui:include src="/secure/pxhdo901/gxhdo901b.xhtml"/>
                </t:aliasBean>
                <t:aliasBean alias="#{gXHDO101Common}" value="#{gXHDO501DA}">
                    <ui:include src="/secure/common/compMessage.xhtml"/>
                </t:aliasBean>
                <ui:include src="/secure/common/resultMessage.xhtml"/>
            </div>
        </h:form>
    </h:body>
    </html>