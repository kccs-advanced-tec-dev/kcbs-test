<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <f:view transient="true">
        <head jsfc="h:head">
            <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
            <meta http-equiv="Pragma" content="no-cache"/>
            <meta http-equiv="Cache-Control" content="no-cache"/>
            <meta http-equiv="Expires" content="0"/>
            <title>LOGIN</title>
            <h:outputScript library="primefaces" name="jquery/jquery.js" />
            <script src="#{request.contextPath}/resources/js/locUpload.js"></script>
            <script type="text/javascript">
                //<![CDATA[
                function exit() {
                    window.#{adjustModels.external}.exit();
                }
                function sendLocation() {
                    //upload to
                    g_locationUrl = '#{myParam.locationUrl}';
                    //MAC Address
                    //g_macAddr = window.#{adjustModels.external}.getMacAddr();
                    if ('#{adjustModels.model}' === 'linux_chrome' ||
                        '#{adjustModels.model}' === 'linux_firefox' ||
                        '#{adjustModels.model}' === 'chrome' ||
                        '#{adjustModels.model}' === 'ipad' ||
                        '#{adjustModels.model}' === 'firefox' ||
                        '#{adjustModels.model}' === 'ie11') {
                        g_macAddr = '#{myMsg.NotAvailable}';
                    } else {
                        g_macAddr = window.#{adjustModels.external}.getMacAddr();
                    }

                    //localStorageからMACアドレスを取得(優先)
                    var maddr = localStorage.getItem('MACADDR');
                    if (maddr !== null) {
                        g_macAddr = maddr;
                    }
                    
                    //location
                    g_location = '#{myMsg.NotAvailable}';
                    g_prgname = 'login.xhtml';
                    var interval_id = setInterval(getLocation, #{myParam.sendLocInterval});
                }
                $(document).ready(function() {
                    sendLocation();
                    //全メニューを表示する(1:exit 2:version)
                    window.#{adjustModels.external}.setOmenuFlag(65535);
                    
                });
                //]]>
            </script>
        </head>
        <body jsfc="h:body" onload="document.forms[0].elements[0].focus();" onkeypress="if (event.keyCode === 13) { return false; }">
            <h1>ログイン</h1>
            <form method="POST" action="j_security_check" name="loginform" style="font-size: 22px;">
                <table>
                    <tr>
                        <td style="position:relative;left:16px;">ユーザー</td>
                        <td style="position:relative;left:20px;">
                            <input type="text" name="j_username" maxlength="20" style="border-style: groove; font-size: 22px; width: 420px;"/>
                        </td>
                    </tr>
                    <tr>
                        <td style="position:relative;top:5px;left:16px;">パスワード</td>
                        <td style="position:relative;left:20px;">
                            <input type="password" name="j_password" maxlength="10" style="border-style: groove; font-size: 22px; width: 420px; margin-top: 12px;"/>
                        </td>
                    </tr>
                </table>
                <br />
                <input type="submit" value="ログイン" style="font-size: 22px; margin-top: 16px;  width: 270px;"/>
                <input type="button" value="終了" onclick="exit()"
                       style="font-size: 22px; margin-top: 16px;  width: 100px; margin-left: 20px;"/>
            </form>
        </body>
    </f:view>
</html>